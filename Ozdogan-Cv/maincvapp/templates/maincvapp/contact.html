<!-- prettier-ignore -->
{% extends "maincvapp/base.html" %}
{% load static %}

{% block title %}Ahmed Özdoğan - Contact{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/contact.css' %}" />
{% endblock %} {% block content %}

<main>
  <section>
    <div class="hero-section">
      <h1>Get in Touch</h1>
      <p>
        If you have any questions or would like to collaborate, feel free to
        reach out!
      </p>

      <h2>Contact Information</h2>
      <ul>
        <li>
          Email:
          <a href="mailto:ahmeddozdogan@gmail.com">ahmeddozdogan@gmail.com</a>
        </li>
        <li>Phone: +84 353 572 862</li>
      </ul>

      <div class="social-icons">
        <a
          href="https://facebook.com/ahmed.ozdogan.9"
          target="_blank"
          aria-label="Facebook"
        >
          <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
            <path
              d="M22 12.06C22 6.48 17.52 2 11.94 2S2 6.48 2 12.06c0 5.01 3.66 9.16 8.44 9.94v-7.03H7.9v-2.91h2.54V9.85c0-2.5 1.49-3.88 3.76-3.88 1.09 0 2.24.2 2.24.2v2.46h-1.26c-1.24 0-1.63.77-1.63 1.56v1.87h2.77l-.44 2.91h-2.33V22c4.78-.78 8.44-4.93 8.44-9.94z"
            />
          </svg>
        </a>
        <a
          href="https://www.linkedin.com/in/ahmed-özdoğan-b1b914279"
          target="_blank"
          aria-label="LinkedIn"
        >
          <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
            <path
              d="M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1s2.48 1.12 2.48 2.5zM.5 8.5h4V23h-4V8.5zM8.5 8.5h3.84v1.98h.05c.53-1 1.83-2.05 3.77-2.05 4.03 0 4.78 2.65 4.78 6.1V23h-4v-6.49c0-1.55-.03-3.55-2.17-3.55-2.17 0-2.5 1.7-2.5 3.44V23h-4V8.5z"
            />
          </svg>
        </a>
        <a
          href="https://www.upwork.com/freelancers/~01c95437cf669a09d2?mp_source=share"
          target="_blank"
          aria-label="Upwork"
        >
          <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
            <path
              d="M19.5 4c-2.76 0-5 2.24-5 5v2.06c-.57-.64-1.17-1.45-1.72-2.58L10.9 6H9.1l-.88 2.49C7.6 10.7 6.78 12 5.5 12c-1.1 0-2-.9-2-2V6H2v4c0 2.21 1.79 4 4 4 1.57 0 2.86-.86 3.76-2.43.19-.33.36-.67.52-1.02.76 1.34 1.62 2.4 2.72 3.34V20h2v-4.41c.42.09.86.14 1.31.14 2.76 0 5-2.24 5-5s-2.24-4.73-4.81-4.73zm0 7.73c-1.65 0-3-1.35-3-3s1.35-3 3-3S22.5 7.08 22.5 8.73s-1.35 3-3 3z"
            />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <div class="divider"></div>

  <section class="contact-section">
    <h1>Contact Me</h1>

    <form method="POST" action="{% url 'main:contact' %}" class="contact-form">
      {% csrf_token %} {% if success %}
      <div id="successMessage" style="color: green; text-align: center">
        Your message was sent successfully!
      </div>
      {% endif %} {% if error %}
      <div id="errorMessage" style="color: red; text-align: center">
        {{ error_message }}
      </div>
      {% endif %}

      <label for="name">Name:</label>
      <input type="text" id="name" name="name" required />

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required />

      <label for="subject">Subject:</label>
      <select id="subject" name="subject" required>
        <option value="" disabled selected>Select a subject</option>
        <option value="General Inquiry">General Inquiry</option>
        <option value="Project Collaboration">Project Collaboration</option>
        <option value="Job Opportunity">Job Opportunity</option>
        <option value="Freelance Work">Freelance Work</option>
        <option value="Technical Support">Technical Support</option>
        <option value="Feedback">Feedback</option>
        <option value="Other">Other</option>
      </select>

      <label for="message">Message:</label>
      <textarea id="message" name="message" rows="5" required></textarea>

      <!-- v3 token goes here -->
      <input type="hidden" name="g-recaptcha-response" id="recaptchaToken" />

      <button id="sendBtn" type="submit">Send</button>
    </form>
  </section>
</main>
{% endblock %} {% block extra_scripts %}
<script src="https://www.google.com/recaptcha/api.js?render={{ captcha }}"></script>
<script>
  const form = document.querySelector(".contact-form");
  const button = document.getElementById("sendBtn");
  const tokenInput = document.getElementById("recaptchaToken");

  form.addEventListener("submit", function (e) {
    if (tokenInput.value) {
      return; // token already set, allow normal submit
    }

    e.preventDefault();
    button.disabled = true;
    button.textContent = "Sending...";

    // spinner
    const spinner = document.createElement("span");
    spinner.className = "spinner";
    spinner.style.display = "inline-block";
    spinner.style.marginLeft = "8px";
    spinner.innerHTML = `
      <svg width="18" height="18" viewBox="0 0 50 50">
        <circle cx="25" cy="25" r="20" fill="none" stroke="#fff" stroke-width="5"
                stroke-linecap="round" stroke-dasharray="31.4 31.4" stroke-dashoffset="0">
          <animateTransform attributeName="transform" type="rotate"
                            from="0 25 25" to="360 25 25"
                            dur="1s" repeatCount="indefinite"/>
        </circle>
      </svg>`;
    button.appendChild(spinner);

    grecaptcha.ready(function () {
      grecaptcha
        .execute("{{ captcha }}", { action: "submit" })
        .then(function (token) {
          tokenInput.value = token;
          HTMLFormElement.prototype.submit.call(form); // finally submit
        })
        .catch(function (err) {
          console.error("reCAPTCHA error:", err);
          button.disabled = false;
          button.textContent = "Send";
        });
    });
  });
</script>

{% endblock %}
